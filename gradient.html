<html>

<style>
    h1 {
        line-height: 150%;
    }

    body {
        margin-left: 50px;
    }

    div {
        background-color: black;
        color: white;
        width: 1000px;
    }

    pre code {
        font-size: 120%;
        width: 650px;
        background-color: #eee;
        border: 1px solid #999;
        display: block;
    }
</style>

<body>
    <h1> Rectangle gradient fill from Red to Blue varying alpha from 1 to 0</h1>

    <h2> Create a canvas </h2>
    <pre>
        <code>
        const width = 1000;
        const height = 300;

        const canvas = document.getElementById('canvas');
        canvas.width = width;
        canvas.height = height;

        const ctx = canvas.getContext('2d');
        </code>
    </pre>

    <h2> Using built-in linear gradient </h2>
    <pre>
    <code>
        var gradient = ctx.createLinearGradient(0, 0, height, width);
        gradient.addColorStop(0, 'rgba(255,0,0,1)');
        gradient.addColorStop(1, 'rgba(0,0,255,0)');

        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, width, height);
    </code>
    </pre>
    <div id="canvas1">
        <canvas id="linear"></canvas>
    </div>

    <h2> Using arithmetic mean gradient </h2>
    <pre>
    <code>
        for (var row = 0; row < height; row ++) {
            for (var col = 0; col < width; col ++) {
                var measure = (row / height + col / width) / 2;

                var red = parseInt((1 - measure) * 255);
                var blue = parseInt(measure * 255);
                var alpha = 1 - measure;

                ctx.fillStyle = 'rgba(' + red + ',0,' + blue + ',' + alpha + ')';
                ctx.fillRect(col, row, 1, 1);
            }
        }
    </code>
    </pre>
    <div id="canvas2">
        <canvas id="manual"></canvas>
    </div>

    <script>
        const width = 1000;
        const height = 300;

        const canvas1 = document.getElementById('linear');
        canvas1.width = width;
        canvas1.height = height;

        const ctx1 = canvas1.getContext('2d');

        var gradient = ctx1.createLinearGradient(0, 0, height, width);
        gradient.addColorStop(0, 'rgba(255,0,0,1)');
        gradient.addColorStop(1, 'rgba(0,0,255,0)');

        ctx1.fillStyle = gradient;
        ctx1.fillRect(0, 0, width, height);

        const canvas2 = document.getElementById('manual');
        const ctx2 = canvas2.getContext('2d');

        canvas2.width = width;
        canvas2.height = height;

        for (var row = 0; row < height; row++) {
            for (var col = 0; col < width; col++) {
                var measure = (row / height + col / width) / 2;

                var red = parseInt((1 - measure) * 255);
                var blue = parseInt(measure * 255);
                var alpha = 1 - measure;

                ctx2.fillStyle = 'rgba(' + red + ',0,' + blue + ',' + alpha + ')';
                ctx2.fillRect(col, row, 1, 1);
            }
        }

    </script>
    </body<>

</html>